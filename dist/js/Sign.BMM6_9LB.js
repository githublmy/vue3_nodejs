import{aV as Be,aU as We,b0 as qe,d0 as Me,aX as te,r as C,as as le,aL as D,aq as A,cD as Ee,aR as ie,d as B,o as F,c as L,ae as V,aI as b,e as r,n as O,b4 as oe,b9 as je,b8 as xe,bc as Ge,bu as me,b2 as ue,cG as ce,bv as Ze,b3 as Se,ai as Je,br as Qe,F as et,f as tt,bh as lt,bi as ot,bp as at,cd as nt,bj as st,bl as rt,ad as it,cf as ut,aB as se,by as ct,b as X,w as k,ak as Y,ag as Ve,g as p,i as de,E as dt,am as ve,al as U,af as Fe,bw as ht,aG as ft,aA as Ne,bn as pt,bA as Ae,cs as mt,aP as vt,bq as Pe,bg as he,b_ as gt,aj as bt,an as _t}from"./main.D4uViPbW.js";import{E as kt}from"./el-row.ChN6gPx_.js";import{a as Ct,E as yt}from"./el-form-item.BH9D2YKa.js";import{E as $t}from"./el-input-number.CDOrKe9j.js";import{E as wt}from"./el-col.CL2dZGk_.js";import{d as Mt}from"./debounce.DTWgmgM_.js";import"./_baseClone.C02S0ce6.js";import"./_Uint8Array.C7d7cuXl.js";import"./_initCloneObject.ClIokcBu.js";const ge=e=>{let l,o;return e.type==="touchend"?(o=e.changedTouches[0].clientY,l=e.changedTouches[0].clientX):e.type.startsWith("touch")?(o=e.touches[0].clientY,l=e.touches[0].clientX):(o=e.clientY,l=e.clientX),{clientX:l,clientY:o}},Et=Be({color:{type:We(Object),required:!0},vertical:{type:Boolean,default:!1}});let fe=!1;function ee(e,l){if(!qe)return;const o=function(a){var s;(s=l.drag)==null||s.call(l,a)},t=function(a){var s;document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",t),document.onselectstart=null,document.ondragstart=null,fe=!1,(s=l.end)==null||s.call(l,a)},n=function(a){var s;fe||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",o),document.addEventListener("mouseup",t),document.addEventListener("touchmove",o),document.addEventListener("touchend",t),fe=!0,(s=l.start)==null||s.call(l,a))};e.addEventListener("mousedown",n),e.addEventListener("touchstart",n)}const St=e=>{const l=ie(),o=Me(),t=Me();function n(s){s.target!==o.value&&a(s)}function a(s){if(!t.value||!o.value)return;const i=l.vnode.el.getBoundingClientRect(),{clientX:d,clientY:y}=ge(s);if(e.vertical){let h=y-i.top;h=Math.max(o.value.offsetHeight/2,h),h=Math.min(h,i.height-o.value.offsetHeight/2),e.color.set("alpha",Math.round((h-o.value.offsetHeight/2)/(i.height-o.value.offsetHeight)*100))}else{let h=d-i.left;h=Math.max(o.value.offsetWidth/2,h),h=Math.min(h,i.width-o.value.offsetWidth/2),e.color.set("alpha",Math.round((h-o.value.offsetWidth/2)/(i.width-o.value.offsetWidth)*100))}}return{thumb:o,bar:t,handleDrag:a,handleClick:n}},Vt=(e,{bar:l,thumb:o,handleDrag:t})=>{const n=ie(),a=te("color-alpha-slider"),s=C(0),c=C(0),i=C();function d(){if(!o.value||e.vertical)return 0;const w=n.vnode.el,f=e.color.get("alpha");return w?Math.round(f*(w.offsetWidth-o.value.offsetWidth/2)/100):0}function y(){if(!o.value)return 0;const w=n.vnode.el;if(!e.vertical)return 0;const f=e.color.get("alpha");return w?Math.round(f*(w.offsetHeight-o.value.offsetHeight/2)/100):0}function h(){if(e.color&&e.color.value){const{r:w,g:f,b:_}=e.color.toRgb();return`linear-gradient(to right, rgba(${w}, ${f}, ${_}, 0) 0%, rgba(${w}, ${f}, ${_}, 1) 100%)`}return""}function $(){s.value=d(),c.value=y(),i.value=h()}le(()=>{if(!l.value||!o.value)return;const w={drag:f=>{t(f)},end:f=>{t(f)}};ee(l.value,w),ee(o.value,w),$()}),D(()=>e.color.get("alpha"),()=>$()),D(()=>e.color.value,()=>$());const v=A(()=>[a.b(),a.is("vertical",e.vertical)]),m=A(()=>a.e("bar")),g=A(()=>a.e("thumb")),W=A(()=>({background:i.value})),H=A(()=>({left:Ee(s.value),top:Ee(c.value)}));return{rootKls:v,barKls:m,barStyle:W,thumbKls:g,thumbStyle:H,update:$}},Ft="ElColorAlphaSlider",Nt=B({name:Ft}),At=B({...Nt,props:Et,setup(e,{expose:l}){const o=e,{bar:t,thumb:n,handleDrag:a,handleClick:s}=St(o),{rootKls:c,barKls:i,barStyle:d,thumbKls:y,thumbStyle:h,update:$}=Vt(o,{bar:t,thumb:n,handleDrag:a});return l({update:$,bar:t,thumb:n}),(v,m)=>(F(),L("div",{class:b(r(c))},[V("div",{ref_key:"bar",ref:t,class:b(r(i)),style:O(r(d)),onClick:m[0]||(m[0]=(...g)=>r(s)&&r(s)(...g))},null,6),V("div",{ref_key:"thumb",ref:n,class:b(r(y)),style:O(r(h))},null,6)],2))}});var Pt=oe(At,[["__file","alpha-slider.vue"]]);const It=B({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const l=te("color-hue-slider"),o=ie(),t=C(),n=C(),a=C(0),s=C(0),c=A(()=>e.color.get("hue"));D(()=>c.value,()=>{$()});function i(v){v.target!==t.value&&d(v)}function d(v){if(!n.value||!t.value)return;const g=o.vnode.el.getBoundingClientRect(),{clientX:W,clientY:H}=ge(v);let w;if(e.vertical){let f=H-g.top;f=Math.min(f,g.height-t.value.offsetHeight/2),f=Math.max(t.value.offsetHeight/2,f),w=Math.round((f-t.value.offsetHeight/2)/(g.height-t.value.offsetHeight)*360)}else{let f=W-g.left;f=Math.min(f,g.width-t.value.offsetWidth/2),f=Math.max(t.value.offsetWidth/2,f),w=Math.round((f-t.value.offsetWidth/2)/(g.width-t.value.offsetWidth)*360)}e.color.set("hue",w)}function y(){if(!t.value)return 0;const v=o.vnode.el;if(e.vertical)return 0;const m=e.color.get("hue");return v?Math.round(m*(v.offsetWidth-t.value.offsetWidth/2)/360):0}function h(){if(!t.value)return 0;const v=o.vnode.el;if(!e.vertical)return 0;const m=e.color.get("hue");return v?Math.round(m*(v.offsetHeight-t.value.offsetHeight/2)/360):0}function $(){a.value=y(),s.value=h()}return le(()=>{if(!n.value||!t.value)return;const v={drag:m=>{d(m)},end:m=>{d(m)}};ee(n.value,v),ee(t.value,v),$()}),{bar:n,thumb:t,thumbLeft:a,thumbTop:s,hueValue:c,handleClick:i,update:$,ns:l}}});function Lt(e,l,o,t,n,a){return F(),L("div",{class:b([e.ns.b(),e.ns.is("vertical",e.vertical)])},[V("div",{ref:"bar",class:b(e.ns.e("bar")),onClick:l[0]||(l[0]=(...s)=>e.handleClick&&e.handleClick(...s))},null,2),V("div",{ref:"thumb",class:b(e.ns.e("thumb")),style:O({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var Tt=oe(It,[["render",Lt],["__file","hue-slider.vue"]]);const Dt=Be({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:je,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},teleported:xe.teleported,predefine:{type:We(Array)},validateEvent:{type:Boolean,default:!0},...Ge(["ariaLabel"])}),Bt={[me]:e=>ue(e)||ce(e),[Ze]:e=>ue(e)||ce(e),activeChange:e=>ue(e)||ce(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},He=Symbol("colorPickerContextKey"),Ie=function(e,l,o){return[e,l*o/((e=(2-l)*o)<1?e:2-e)||0,e/2]},Wt=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},Ht=function(e){return typeof e=="string"&&e.includes("%")},q=function(e,l){Wt(e)&&(e="100%");const o=Ht(e);return e=Math.min(l,Math.max(0,Number.parseFloat(`${e}`))),o&&(e=Number.parseInt(`${e*l}`,10)/100),Math.abs(e-l)<1e-6?1:e%l/Number.parseFloat(l)},Le={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},re=e=>{e=Math.min(Math.round(e),255);const l=Math.floor(e/16),o=e%16;return`${Le[l]||l}${Le[o]||o}`},Te=function({r:e,g:l,b:o}){return Number.isNaN(+e)||Number.isNaN(+l)||Number.isNaN(+o)?"":`#${re(e)}${re(l)}${re(o)}`},pe={A:10,B:11,C:12,D:13,E:14,F:15},z=function(e){return e.length===2?(pe[e[0].toUpperCase()]||+e[0])*16+(pe[e[1].toUpperCase()]||+e[1]):pe[e[1].toUpperCase()]||+e[1]},Rt=function(e,l,o){l=l/100,o=o/100;let t=l;const n=Math.max(o,.01);o*=2,l*=o<=1?o:2-o,t*=n<=1?n:2-n;const a=(o+l)/2,s=o===0?2*t/(n+t):2*l/(o+l);return{h:e,s:s*100,v:a*100}},De=(e,l,o)=>{e=q(e,255),l=q(l,255),o=q(o,255);const t=Math.max(e,l,o),n=Math.min(e,l,o);let a;const s=t,c=t-n,i=t===0?0:c/t;if(t===n)a=0;else{switch(t){case e:{a=(l-o)/c+(l<o?6:0);break}case l:{a=(o-e)/c+2;break}case o:{a=(e-l)/c+4;break}}a/=6}return{h:a*360,s:i*100,v:s*100}},J=function(e,l,o){e=q(e,360)*6,l=q(l,100),o=q(o,100);const t=Math.floor(e),n=e-t,a=o*(1-l),s=o*(1-n*l),c=o*(1-(1-n)*l),i=t%6,d=[o,s,a,a,c,o][i],y=[c,o,o,s,a,a][i],h=[a,a,c,o,o,s][i];return{r:Math.round(d*255),g:Math.round(y*255),b:Math.round(h*255)}};class Q{constructor(l={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const o in l)Se(l,o)&&(this[o]=l[o]);l.value?this.fromString(l.value):this.doOnChange()}set(l,o){if(arguments.length===1&&typeof l=="object"){for(const t in l)Se(l,t)&&this.set(t,l[t]);return}this[`_${l}`]=o,this.doOnChange()}get(l){return l==="alpha"?Math.floor(this[`_${l}`]):this[`_${l}`]}toRgb(){return J(this._hue,this._saturation,this._value)}fromString(l){if(!l){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const o=(t,n,a)=>{this._hue=Math.max(0,Math.min(360,t)),this._saturation=Math.max(0,Math.min(100,n)),this._value=Math.max(0,Math.min(100,a)),this.doOnChange()};if(l.includes("hsl")){const t=l.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,a)=>a>2?Number.parseFloat(n):Number.parseInt(n,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:n,s:a,v:s}=Rt(t[0],t[1],t[2]);o(n,a,s)}}else if(l.includes("hsv")){const t=l.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,a)=>a>2?Number.parseFloat(n):Number.parseInt(n,10));t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3&&o(t[0],t[1],t[2])}else if(l.includes("rgb")){const t=l.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,a)=>a>2?Number.parseFloat(n):Number.parseInt(n,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:n,s:a,v:s}=De(t[0],t[1],t[2]);o(n,a,s)}}else if(l.includes("#")){const t=l.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(t))return;let n,a,s;t.length===3?(n=z(t[0]+t[0]),a=z(t[1]+t[1]),s=z(t[2]+t[2])):(t.length===6||t.length===8)&&(n=z(t.slice(0,2)),a=z(t.slice(2,4)),s=z(t.slice(4,6))),t.length===8?this._alpha=z(t.slice(6))/255*100:(t.length===3||t.length===6)&&(this._alpha=100);const{h:c,s:i,v:d}=De(n,a,s);o(c,i,d)}}compare(l){return Math.abs(l._hue-this._hue)<2&&Math.abs(l._saturation-this._saturation)<1&&Math.abs(l._value-this._value)<1&&Math.abs(l._alpha-this._alpha)<1}doOnChange(){const{_hue:l,_saturation:o,_value:t,_alpha:n,format:a}=this;if(this.enableAlpha)switch(a){case"hsl":{const s=Ie(l,o/100,t/100);this.value=`hsla(${l}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${l}, ${Math.round(o)}%, ${Math.round(t)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Te(J(l,o,t))}${re(n*255/100)}`;break}default:{const{r:s,g:c,b:i}=J(l,o,t);this.value=`rgba(${s}, ${c}, ${i}, ${this.get("alpha")/100})`}}else switch(a){case"hsl":{const s=Ie(l,o/100,t/100);this.value=`hsl(${l}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${l}, ${Math.round(o)}%, ${Math.round(t)}%)`;break}case"rgb":{const{r:s,g:c,b:i}=J(l,o,t);this.value=`rgb(${s}, ${c}, ${i})`;break}default:this.value=Te(J(l,o,t))}}}const zt=B({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const l=te("color-predefine"),{currentColor:o}=Je(He),t=C(a(e.colors,e.color));D(()=>o.value,s=>{const c=new Q;c.fromString(s),t.value.forEach(i=>{i.selected=c.compare(i)})}),Qe(()=>{t.value=a(e.colors,e.color)});function n(s){e.color.fromString(e.colors[s])}function a(s,c){return s.map(i=>{const d=new Q;return d.enableAlpha=!0,d.format="rgba",d.fromString(i),d.selected=d.value===c.value,d})}return{rgbaColors:t,handleSelect:n,ns:l}}}),Ot=["onClick"];function Kt(e,l,o,t,n,a){return F(),L("div",{class:b(e.ns.b())},[V("div",{class:b(e.ns.e("colors"))},[(F(!0),L(et,null,tt(e.rgbaColors,(s,c)=>(F(),L("div",{key:e.colors[c],class:b([e.ns.e("color-selector"),e.ns.is("alpha",s._alpha<100),{selected:s.selected}]),onClick:i=>e.handleSelect(c)},[V("div",{style:O({backgroundColor:s.value})},null,4)],10,Ot))),128))],2)],2)}var Ut=oe(zt,[["render",Kt],["__file","predefine.vue"]]);const Xt=B({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const l=te("color-svpanel"),o=ie(),t=C(0),n=C(0),a=C("hsl(0, 100%, 50%)"),s=A(()=>{const d=e.color.get("hue"),y=e.color.get("value");return{hue:d,value:y}});function c(){const d=e.color.get("saturation"),y=e.color.get("value"),h=o.vnode.el,{clientWidth:$,clientHeight:v}=h;n.value=d*$/100,t.value=(100-y)*v/100,a.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function i(d){const h=o.vnode.el.getBoundingClientRect(),{clientX:$,clientY:v}=ge(d);let m=$-h.left,g=v-h.top;m=Math.max(0,m),m=Math.min(m,h.width),g=Math.max(0,g),g=Math.min(g,h.height),n.value=m,t.value=g,e.color.set({saturation:m/h.width*100,value:100-g/h.height*100})}return D(()=>s.value,()=>{c()}),le(()=>{ee(o.vnode.el,{drag:d=>{i(d)},end:d=>{i(d)}}),c()}),{cursorTop:t,cursorLeft:n,background:a,colorValue:s,handleDrag:i,update:c,ns:l}}}),Yt=V("div",null,null,-1),qt=[Yt];function jt(e,l,o,t,n,a){return F(),L("div",{class:b(e.ns.b()),style:O({backgroundColor:e.background})},[V("div",{class:b(e.ns.e("white"))},null,2),V("div",{class:b(e.ns.e("black"))},null,2),V("div",{class:b(e.ns.e("cursor")),style:O({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},qt,6)],6)}var xt=oe(Xt,[["render",jt],["__file","sv-panel.vue"]]);const Gt=["onKeydown"],Zt=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],Jt=B({name:"ElColorPicker"}),Qt=B({...Jt,props:Dt,emits:Bt,setup(e,{expose:l,emit:o}){const t=e,{t:n}=lt(),a=te("color"),{formItem:s}=ot(),c=at(),i=nt(),{inputId:d,isLabeledByFormItem:y}=st(t,{formItemContext:s}),h=C(),$=C(),v=C(),m=C(),g=C(),W=C(),{isFocused:H,handleFocus:w,handleBlur:f}=rt(g,{beforeBlur(u){var E;return(E=m.value)==null?void 0:E.isFocusInsideContent(u)},afterBlur(){G(!1),Z()}}),_=u=>{if(i.value)return ye();w(u)};let S=!0;const M=it(new Q({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue})),T=C(!1),N=C(!1),R=C(""),K=A(()=>!t.modelValue&&!N.value?"transparent":Re(M,t.showAlpha)),j=A(()=>!t.modelValue&&!N.value?"":M.value),ae=A(()=>y.value?void 0:t.label||t.ariaLabel||n("el.colorpicker.defaultLabel"));ut({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-color-picker",ref:"https://element-plus.org/en-US/component/color-picker.html"},A(()=>!!t.label));const x=A(()=>y.value?s==null?void 0:s.labelId:void 0),P=A(()=>[a.b("picker"),a.is("disabled",i.value),a.bm("picker",c.value),a.is("focused",H.value)]);function Re(u,E){if(!(u instanceof Q))throw new TypeError("color should be instance of _color Class");const{r:I,g:$e,b:we}=u.toRgb();return E?`rgba(${I}, ${$e}, ${we}, ${u.get("alpha")/100})`:`rgb(${I}, ${$e}, ${we})`}function G(u){T.value=u}const ne=Mt(G,100,{leading:!0});function be(){i.value||G(!0)}function _e(){ne(!1),Z()}function Z(){se(()=>{t.modelValue?M.fromString(t.modelValue):(M.value="",se(()=>{N.value=!1}))})}function ze(){i.value||ne(!T.value)}function ke(){M.fromString(R.value)}function Oe(){const u=M.value;o(me,u),o("change",u),t.validateEvent&&(s==null||s.validate("change").catch(E=>Pe())),ne(!1),se(()=>{const E=new Q({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});M.compare(E)||Z()})}function Ke(){ne(!1),o(me,null),o("change",null),t.modelValue!==null&&t.validateEvent&&(s==null||s.validate("change").catch(u=>Pe())),Z()}function Ue(u){if(T.value&&(_e(),H.value)){const E=new FocusEvent("focus",u);f(E)}}function Ce(u){u.preventDefault(),u.stopPropagation(),G(!1),Z()}function Xe(u){switch(u.code){case he.enter:case he.space:u.preventDefault(),u.stopPropagation(),be(),W.value.focus();break;case he.esc:Ce(u);break}}function Ye(){g.value.focus()}function ye(){g.value.blur()}return le(()=>{t.modelValue&&(R.value=j.value)}),D(()=>t.modelValue,u=>{u?u&&u!==M.value&&(S=!1,M.fromString(u)):N.value=!1}),D(()=>j.value,u=>{R.value=u,S&&o("activeChange",u),S=!0}),D(()=>M.value,()=>{!t.modelValue&&!N.value&&(N.value=!0)}),D(()=>T.value,()=>{se(()=>{var u,E,I;(u=h.value)==null||u.update(),(E=$.value)==null||E.update(),(I=v.value)==null||I.update()})}),ct(He,{currentColor:j}),l({color:M,show:be,hide:_e,focus:Ye,blur:ye}),(u,E)=>(F(),X(r(vt),{ref_key:"popper",ref:m,visible:T.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[r(a).be("picker","panel"),r(a).b("dropdown"),u.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:u.teleported,transition:`${r(a).namespace.value}-zoom-in-top`,persistent:"",onHide:E[2]||(E[2]=I=>G(!1))},{content:k(()=>[Y((F(),L("div",{onKeydown:Ve(Ce,["esc"])},[V("div",{class:b(r(a).be("dropdown","main-wrapper"))},[p(Tt,{ref_key:"hue",ref:h,class:"hue-slider",color:r(M),vertical:""},null,8,["color"]),p(xt,{ref_key:"sv",ref:$,color:r(M)},null,8,["color"])],2),u.showAlpha?(F(),X(Pt,{key:0,ref_key:"alpha",ref:v,color:r(M)},null,8,["color"])):de("v-if",!0),u.predefine?(F(),X(Ut,{key:1,ref:"predefine",color:r(M),colors:u.predefine},null,8,["color","colors"])):de("v-if",!0),V("div",{class:b(r(a).be("dropdown","btns"))},[V("span",{class:b(r(a).be("dropdown","value"))},[p(r(dt),{ref_key:"inputRef",ref:W,modelValue:R.value,"onUpdate:modelValue":E[0]||(E[0]=I=>R.value=I),"validate-event":!1,size:"small",onKeyup:Ve(ke,["enter"]),onBlur:ke},null,8,["modelValue","onKeyup"])],2),p(r(ve),{class:b(r(a).be("dropdown","link-btn")),text:"",size:"small",onClick:Ke},{default:k(()=>[U(Fe(r(n)("el.colorpicker.clear")),1)]),_:1},8,["class"]),p(r(ve),{plain:"",size:"small",class:b(r(a).be("dropdown","btn")),onClick:Oe},{default:k(()=>[U(Fe(r(n)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,Gt)),[[r(ht),Ue]])]),default:k(()=>[V("div",ft({id:r(d),ref_key:"triggerRef",ref:g},u.$attrs,{class:r(P),role:"button","aria-label":r(ae),"aria-labelledby":r(x),"aria-description":r(n)("el.colorpicker.description",{color:u.modelValue||""}),"aria-disabled":r(i),tabindex:r(i)?-1:u.tabindex,onKeydown:Xe,onFocus:_,onBlur:E[1]||(E[1]=(...I)=>r(f)&&r(f)(...I))}),[r(i)?(F(),L("div",{key:0,class:b(r(a).be("picker","mask"))},null,2)):de("v-if",!0),V("div",{class:b(r(a).be("picker","trigger")),onClick:ze},[V("span",{class:b([r(a).be("picker","color"),r(a).is("alpha",u.showAlpha)])},[V("span",{class:b(r(a).be("picker","color-inner")),style:O({backgroundColor:r(K)})},[Y(p(r(Ne),{class:b([r(a).be("picker","icon"),r(a).is("icon-arrow-down")])},{default:k(()=>[p(r(pt))]),_:1},8,["class"]),[[Ae,u.modelValue||N.value]]),Y(p(r(Ne),{class:b([r(a).be("picker","empty"),r(a).is("icon-close")])},{default:k(()=>[p(r(mt))]),_:1},8,["class"]),[[Ae,!u.modelValue&&!N.value]])],6)],2)],2)],16,Zt)]),_:1},8,["visible","popper-class","teleported","transition"]))}});var el=oe(Qt,[["__file","color-picker.vue"]]);const tl=gt(el),ll={class:"sign"},ol=["width","height"],al=B({__name:"index",setup(e){const l=C({width:800,height:300,fillStyle:"#fff",color:"#000",lineWidth:4});let o=!1,t,n,a=[];const s=()=>{t=document.getElementById("canvas"),n=t.getContext("2d",{willReadFrequently:!0}),d(),n.fillRect(0,0,t.width,t.height),i(),c()},c=()=>{n.strokeStyle=l.value.color},i=()=>{n.lineWidth=l.value.lineWidth},d=()=>{n.fillStyle=l.value.fillStyle},y=()=>{l.value={...l.value,fillStyle:"#fff",color:"#000",lineWidth:4},d(),i(),c()},h=()=>{o=!1},$=()=>{const _=n.getImageData(0,0,t.width,t.height);a.push(_),o=!1},v=()=>{if(a.length)if(a.length>1){const _=a.at(-2);a.pop(),n.putImageData(_,0,0)}else a.length===1&&(a.pop(),m())};function m(){a.length&&(a=[],n.clearRect(0,0,t.width,t.height))}const g=()=>{const _=document.createElement("a"),S=t.toDataURL();_.href=S,_.download=W(),document.body.appendChild(_),_.click(),document.body.removeChild(_)},W=(_=36,S=-6)=>Math.random().toString(_).slice(S),H=_=>{n.beginPath(),n.moveTo(_.offsetX,_.offsetY),o=!0},w=_=>{o&&(n.lineTo(_.offsetX,_.offsetY),n.stroke())},f=()=>{d(),n.fillRect(0,0,t.width,t.height)};return le(()=>{s()}),(_,S)=>{const M=wt,T=$t,N=Ct,R=tl,K=ve,j=yt,ae=kt,x=bt("blur");return F(),L("div",ll,[p(ae,{gutter:20},{default:k(()=>[p(M,{span:20},{default:k(()=>[V("canvas",{id:"canvas",width:r(l).width,height:r(l).height,onMouseleave:h,onMousedown:H,onMouseup:$,onMousemove:w}," 你的浏览器不支持 canvas，请升级你的浏览器。 ",40,ol)]),_:1}),p(M,{span:4},{default:k(()=>[p(j,{model:r(l),ref:"form","label-width":"80px",inline:!1},{default:k(()=>[p(N,{label:"画布宽度",prop:"width"},{default:k(()=>[p(T,{modelValue:r(l).width,"onUpdate:modelValue":S[0]||(S[0]=P=>r(l).width=P),min:0,size:"small"},null,8,["modelValue"])]),_:1}),p(N,{label:"画布高度",prop:"height"},{default:k(()=>[p(T,{modelValue:r(l).height,"onUpdate:modelValue":S[1]||(S[1]=P=>r(l).height=P),min:0,size:"small"},null,8,["modelValue"])]),_:1}),p(N,{label:"背景颜色",prop:"fillStyle"},{default:k(()=>[p(R,{modelValue:r(l).fillStyle,"onUpdate:modelValue":S[2]||(S[2]=P=>r(l).fillStyle=P),size:"large","show-alpha":"",onChange:f},null,8,["modelValue"])]),_:1}),p(N,{label:"画笔颜色",prop:"color"},{default:k(()=>[p(R,{modelValue:r(l).color,"onUpdate:modelValue":S[3]||(S[3]=P=>r(l).color=P),size:"large","show-alpha":"",onChange:c},null,8,["modelValue"])]),_:1}),p(N,{label:"画笔粗细",prop:"lineWidth"},{default:k(()=>[p(T,{modelValue:r(l).lineWidth,"onUpdate:modelValue":S[4]||(S[4]=P=>r(l).lineWidth=P),min:0,"step-strictly":"",onChange:i,size:"small"},null,8,["modelValue"])]),_:1}),p(N,null,{default:k(()=>[p(K,{type:"primary",size:"small",onClick:y},{default:k(()=>[U("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),p(ae,null,{default:k(()=>[p(M,null,{default:k(()=>[Y((F(),X(K,{type:"primary",size:"small",onClick:v},{default:k(()=>[U("上一步")]),_:1})),[[x]]),Y((F(),X(K,{type:"primary",size:"small",onClick:m},{default:k(()=>[U("清空")]),_:1})),[[x]]),Y((F(),X(K,{type:"primary",size:"small",onClick:g},{default:k(()=>[U("保存图片")]),_:1})),[[x]])]),_:1})]),_:1})])}}}),nl=_t(al,[["__scopeId","data-v-089bfd7b"]]),ml=B({__name:"Sign",setup(e){return(l,o)=>(F(),L("div",null,[p(nl)]))}});export{ml as default};
