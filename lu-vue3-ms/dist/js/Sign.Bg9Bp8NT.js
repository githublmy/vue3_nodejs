import{d as S,r as P,as as X,aj as Y,o as c,c as x,g as t,w as o,ae as j,e as s,al as f,ak as C,b as V,am as q,an as A}from"./main.CrQy0rei.js";import{E as $}from"./el-row.Bv96wKzH.js";import{a as G,E as H}from"./el-form-item.wtASsPiC.js";import{E as J}from"./el-color-picker.skGZniGS.js";import{E as K}from"./el-input-number.jN3QvRbB.js";import{E as O}from"./el-col.C6TD3t-L.js";import"./_baseClone.CmRA-Kzl.js";import"./_Uint8Array.BJ3loEHr.js";import"./_initCloneObject.CmUq_dQd.js";import"./debounce.CQa-nK8j.js";const Q={class:"sign"},Z=["width","height"],ee=S({__name:"index",setup(z){const e=P({width:800,height:300,fillStyle:"#fff",color:"#000",lineWidth:4});let u=!1,i,n,r=[];const B=()=>{i=document.getElementById("canvas"),n=i.getContext("2d",{willReadFrequently:!0}),g(),n.fillRect(0,0,i.width,i.height),_(),h()},h=()=>{n.strokeStyle=e.value.color},_=()=>{n.lineWidth=e.value.lineWidth},g=()=>{n.fillStyle=e.value.fillStyle},D=()=>{e.value={...e.value,fillStyle:"#fff",color:"#000",lineWidth:4},g(),_(),h()},W=()=>{u=!1},R=()=>{const l=n.getImageData(0,0,i.width,i.height);r.push(l),u=!1},U=()=>{if(r.length)if(r.length>1){const l=r.at(-2);r.pop(),n.putImageData(l,0,0)}else r.length===1&&(r.pop(),b())};function b(){r.length&&(r=[],n.clearRect(0,0,i.width,i.height))}const I=()=>{const l=document.createElement("a"),a=i.toDataURL();l.href=a,l.download=M(),document.body.appendChild(l),l.click(),document.body.removeChild(l)},M=(l=36,a=-6)=>Math.random().toString(l).slice(a),N=l=>{n.beginPath(),n.moveTo(l.offsetX,l.offsetY),u=!0},F=l=>{u&&(n.lineTo(l.offsetX,l.offsetY),n.stroke())},T=()=>{g(),n.fillRect(0,0,i.width,i.height)};return X(()=>{B()}),(l,a)=>{const v=O,w=K,m=G,E=J,p=q,L=H,k=$,y=Y("blur");return c(),x("div",Q,[t(k,{gutter:20},{default:o(()=>[t(v,{span:20},{default:o(()=>[j("canvas",{id:"canvas",width:s(e).width,height:s(e).height,onMouseleave:W,onMousedown:N,onMouseup:R,onMousemove:F}," 你的浏览器不支持 canvas，请升级你的浏览器。 ",40,Z)]),_:1}),t(v,{span:4},{default:o(()=>[t(L,{model:s(e),ref:"form","label-width":"80px",inline:!1},{default:o(()=>[t(m,{label:"画布宽度",prop:"width"},{default:o(()=>[t(w,{modelValue:s(e).width,"onUpdate:modelValue":a[0]||(a[0]=d=>s(e).width=d),min:0,size:"small"},null,8,["modelValue"])]),_:1}),t(m,{label:"画布高度",prop:"height"},{default:o(()=>[t(w,{modelValue:s(e).height,"onUpdate:modelValue":a[1]||(a[1]=d=>s(e).height=d),min:0,size:"small"},null,8,["modelValue"])]),_:1}),t(m,{label:"背景颜色",prop:"fillStyle"},{default:o(()=>[t(E,{modelValue:s(e).fillStyle,"onUpdate:modelValue":a[2]||(a[2]=d=>s(e).fillStyle=d),size:"large","show-alpha":"",onChange:T},null,8,["modelValue"])]),_:1}),t(m,{label:"画笔颜色",prop:"color"},{default:o(()=>[t(E,{modelValue:s(e).color,"onUpdate:modelValue":a[3]||(a[3]=d=>s(e).color=d),size:"large","show-alpha":"",onChange:h},null,8,["modelValue"])]),_:1}),t(m,{label:"画笔粗细",prop:"lineWidth"},{default:o(()=>[t(w,{modelValue:s(e).lineWidth,"onUpdate:modelValue":a[4]||(a[4]=d=>s(e).lineWidth=d),min:0,"step-strictly":"",onChange:_,size:"small"},null,8,["modelValue"])]),_:1}),t(m,null,{default:o(()=>[t(p,{type:"primary",size:"small",onClick:D},{default:o(()=>[f("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),t(k,null,{default:o(()=>[t(v,null,{default:o(()=>[C((c(),V(p,{type:"primary",size:"small",onClick:U},{default:o(()=>[f("上一步")]),_:1})),[[y]]),C((c(),V(p,{type:"primary",size:"small",onClick:b},{default:o(()=>[f("清空")]),_:1})),[[y]]),C((c(),V(p,{type:"primary",size:"small",onClick:I},{default:o(()=>[f("保存图片")]),_:1})),[[y]])]),_:1})]),_:1})])}}}),te=A(ee,[["__scopeId","data-v-089bfd7b"]]),ce=S({__name:"Sign",setup(z){return(e,u)=>(c(),x("div",null,[t(te)]))}});export{ce as default};
