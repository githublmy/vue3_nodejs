import{b3 as o,ac as s,ab as n}from"./vendor-CKOI4o9H.js";const a=o.create({baseURL:"/",timeout:1e3*1e3});let r=!1;a.interceptors.request.use(e=>e,e=>Promise.reject(e));a.interceptors.response.use(e=>{if(!e.data)return s({message:"请求错误，请联系管理员！",type:"error"}),Promise.reject();const t=e.data.code||200,{msg:i}=e.data;return e.request.responseType==="blob"||e.request.responseType==="arraybuffer"?e:t===200?e.data:t>=32e3&&t<33e3?(r||(r=!0,n.confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(async()=>{r=!1}).catch(()=>{r=!1})),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):(s({message:i,type:"error"}),Promise.reject(e.data))},e=>{let{message:t}=e;return t=="Network Error"?t="后端接口连接异常":t.includes("timeout")?t="系统接口请求超时":t.includes("Request failed with status code")&&(t="系统接口"+t.substring(t.length-3)+"异常"),s({message:t,type:"error",duration:5*1e3}),Promise.reject(e)});export{a as i};
