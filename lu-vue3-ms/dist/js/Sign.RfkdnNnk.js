import{aT as De,aY as We,aS as je,co as Me,a$ as te,r as C,as as le,aB as L,ao as A,cv as Ee,b8 as ie,d as D,o as V,c as I,ae as F,b0 as g,e as r,n as R,aX as oe,bz as qe,bN as me,bF as ue,c3 as ce,c8 as xe,bd as Se,ai as Ze,b1 as Ge,F as Je,f as Qe,aV as et,bP as tt,by as lt,bO as ot,bS as at,c2 as nt,ad as st,bl as se,b9 as rt,b as X,w as k,ak as Y,ag as Fe,g as p,i as de,E as it,am as ve,al as U,af as Ve,bp as ut,aA as Ne,bn as ct,bA as Ae,bZ as dt,aF as ht,ba as Pe,c6 as he,bc as ft,aj as pt,an as mt}from"./main.BuR06GfJ.js";import{E as vt}from"./el-row.hKOt_qV-.js";import{a as gt,E as bt}from"./el-form-item.BNi3imon.js";import{E as _t}from"./el-input-number.DbmJrAxr.js";import{E as kt}from"./el-col.NV8d0TOn.js";import{d as Ct}from"./debounce.JTjhZbrI.js";import"./_baseClone.DeK69c4Z.js";import"./_Uint8Array.C_K5tKNB.js";import"./_initCloneObject.D-Yx5pxC.js";const ge=e=>{let l,o;return e.type==="touchend"?(o=e.changedTouches[0].clientY,l=e.changedTouches[0].clientX):e.type.startsWith("touch")?(o=e.touches[0].clientY,l=e.touches[0].clientX):(o=e.clientY,l=e.clientX),{clientX:l,clientY:o}},yt=De({color:{type:We(Object),required:!0},vertical:{type:Boolean,default:!1}});let fe=!1;function ee(e,l){if(!je)return;const o=function(a){var s;(s=l.drag)==null||s.call(l,a)},t=function(a){var s;document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",t),document.onselectstart=null,document.ondragstart=null,fe=!1,(s=l.end)==null||s.call(l,a)},n=function(a){var s;fe||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",o),document.addEventListener("mouseup",t),document.addEventListener("touchmove",o),document.addEventListener("touchend",t),fe=!0,(s=l.start)==null||s.call(l,a))};e.addEventListener("mousedown",n),e.addEventListener("touchstart",n)}const $t=e=>{const l=ie(),o=Me(),t=Me();function n(s){s.target!==o.value&&a(s)}function a(s){if(!t.value||!o.value)return;const i=l.vnode.el.getBoundingClientRect(),{clientX:d,clientY:y}=ge(s);if(e.vertical){let h=y-i.top;h=Math.max(o.value.offsetHeight/2,h),h=Math.min(h,i.height-o.value.offsetHeight/2),e.color.set("alpha",Math.round((h-o.value.offsetHeight/2)/(i.height-o.value.offsetHeight)*100))}else{let h=d-i.left;h=Math.max(o.value.offsetWidth/2,h),h=Math.min(h,i.width-o.value.offsetWidth/2),e.color.set("alpha",Math.round((h-o.value.offsetWidth/2)/(i.width-o.value.offsetWidth)*100))}}return{thumb:o,bar:t,handleDrag:a,handleClick:n}},wt=(e,{bar:l,thumb:o,handleDrag:t})=>{const n=ie(),a=te("color-alpha-slider"),s=C(0),c=C(0),i=C();function d(){if(!o.value||e.vertical)return 0;const w=n.vnode.el,f=e.color.get("alpha");return w?Math.round(f*(w.offsetWidth-o.value.offsetWidth/2)/100):0}function y(){if(!o.value)return 0;const w=n.vnode.el;if(!e.vertical)return 0;const f=e.color.get("alpha");return w?Math.round(f*(w.offsetHeight-o.value.offsetHeight/2)/100):0}function h(){if(e.color&&e.color.value){const{r:w,g:f,b:_}=e.color.toRgb();return`linear-gradient(to right, rgba(${w}, ${f}, ${_}, 0) 0%, rgba(${w}, ${f}, ${_}, 1) 100%)`}return""}function $(){s.value=d(),c.value=y(),i.value=h()}le(()=>{if(!l.value||!o.value)return;const w={drag:f=>{t(f)},end:f=>{t(f)}};ee(l.value,w),ee(o.value,w),$()}),L(()=>e.color.get("alpha"),()=>$()),L(()=>e.color.value,()=>$());const v=A(()=>[a.b(),a.is("vertical",e.vertical)]),m=A(()=>a.e("bar")),b=A(()=>a.e("thumb")),W=A(()=>({background:i.value})),H=A(()=>({left:Ee(s.value),top:Ee(c.value)}));return{rootKls:v,barKls:m,barStyle:W,thumbKls:b,thumbStyle:H,update:$}},Mt="ElColorAlphaSlider",Et=D({name:Mt}),St=D({...Et,props:yt,setup(e,{expose:l}){const o=e,{bar:t,thumb:n,handleDrag:a,handleClick:s}=$t(o),{rootKls:c,barKls:i,barStyle:d,thumbKls:y,thumbStyle:h,update:$}=wt(o,{bar:t,thumb:n,handleDrag:a});return l({update:$,bar:t,thumb:n}),(v,m)=>(V(),I("div",{class:g(r(c))},[F("div",{ref_key:"bar",ref:t,class:g(r(i)),style:R(r(d)),onClick:m[0]||(m[0]=(...b)=>r(s)&&r(s)(...b))},null,6),F("div",{ref_key:"thumb",ref:n,class:g(r(y)),style:R(r(h))},null,6)],2))}});var Ft=oe(St,[["__file","alpha-slider.vue"]]);const Vt=D({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const l=te("color-hue-slider"),o=ie(),t=C(),n=C(),a=C(0),s=C(0),c=A(()=>e.color.get("hue"));L(()=>c.value,()=>{$()});function i(v){v.target!==t.value&&d(v)}function d(v){if(!n.value||!t.value)return;const b=o.vnode.el.getBoundingClientRect(),{clientX:W,clientY:H}=ge(v);let w;if(e.vertical){let f=H-b.top;f=Math.min(f,b.height-t.value.offsetHeight/2),f=Math.max(t.value.offsetHeight/2,f),w=Math.round((f-t.value.offsetHeight/2)/(b.height-t.value.offsetHeight)*360)}else{let f=W-b.left;f=Math.min(f,b.width-t.value.offsetWidth/2),f=Math.max(t.value.offsetWidth/2,f),w=Math.round((f-t.value.offsetWidth/2)/(b.width-t.value.offsetWidth)*360)}e.color.set("hue",w)}function y(){if(!t.value)return 0;const v=o.vnode.el;if(e.vertical)return 0;const m=e.color.get("hue");return v?Math.round(m*(v.offsetWidth-t.value.offsetWidth/2)/360):0}function h(){if(!t.value)return 0;const v=o.vnode.el;if(!e.vertical)return 0;const m=e.color.get("hue");return v?Math.round(m*(v.offsetHeight-t.value.offsetHeight/2)/360):0}function $(){a.value=y(),s.value=h()}return le(()=>{if(!n.value||!t.value)return;const v={drag:m=>{d(m)},end:m=>{d(m)}};ee(n.value,v),ee(t.value,v),$()}),{bar:n,thumb:t,thumbLeft:a,thumbTop:s,hueValue:c,handleClick:i,update:$,ns:l}}});function Nt(e,l,o,t,n,a){return V(),I("div",{class:g([e.ns.b(),e.ns.is("vertical",e.vertical)])},[F("div",{ref:"bar",class:g(e.ns.e("bar")),onClick:l[0]||(l[0]=(...s)=>e.handleClick&&e.handleClick(...s))},null,2),F("div",{ref:"thumb",class:g(e.ns.e("thumb")),style:R({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var At=oe(Vt,[["render",Nt],["__file","hue-slider.vue"]]);const Pt=De({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:qe,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:We(Array)},validateEvent:{type:Boolean,default:!0}}),Tt={[me]:e=>ue(e)||ce(e),[xe]:e=>ue(e)||ce(e),activeChange:e=>ue(e)||ce(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},He=Symbol("colorPickerContextKey"),Te=function(e,l,o){return[e,l*o/((e=(2-l)*o)<1?e:2-e)||0,e/2]},It=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},Bt=function(e){return typeof e=="string"&&e.includes("%")},j=function(e,l){It(e)&&(e="100%");const o=Bt(e);return e=Math.min(l,Math.max(0,Number.parseFloat(`${e}`))),o&&(e=Number.parseInt(`${e*l}`,10)/100),Math.abs(e-l)<1e-6?1:e%l/Number.parseFloat(l)},Ie={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},re=e=>{e=Math.min(Math.round(e),255);const l=Math.floor(e/16),o=e%16;return`${Ie[l]||l}${Ie[o]||o}`},Be=function({r:e,g:l,b:o}){return Number.isNaN(+e)||Number.isNaN(+l)||Number.isNaN(+o)?"":`#${re(e)}${re(l)}${re(o)}`},pe={A:10,B:11,C:12,D:13,E:14,F:15},O=function(e){return e.length===2?(pe[e[0].toUpperCase()]||+e[0])*16+(pe[e[1].toUpperCase()]||+e[1]):pe[e[1].toUpperCase()]||+e[1]},Lt=function(e,l,o){l=l/100,o=o/100;let t=l;const n=Math.max(o,.01);o*=2,l*=o<=1?o:2-o,t*=n<=1?n:2-n;const a=(o+l)/2,s=o===0?2*t/(n+t):2*l/(o+l);return{h:e,s:s*100,v:a*100}},Le=(e,l,o)=>{e=j(e,255),l=j(l,255),o=j(o,255);const t=Math.max(e,l,o),n=Math.min(e,l,o);let a;const s=t,c=t-n,i=t===0?0:c/t;if(t===n)a=0;else{switch(t){case e:{a=(l-o)/c+(l<o?6:0);break}case l:{a=(o-e)/c+2;break}case o:{a=(e-l)/c+4;break}}a/=6}return{h:a*360,s:i*100,v:s*100}},J=function(e,l,o){e=j(e,360)*6,l=j(l,100),o=j(o,100);const t=Math.floor(e),n=e-t,a=o*(1-l),s=o*(1-n*l),c=o*(1-(1-n)*l),i=t%6,d=[o,s,a,a,c,o][i],y=[c,o,o,s,a,a][i],h=[a,a,c,o,o,s][i];return{r:Math.round(d*255),g:Math.round(y*255),b:Math.round(h*255)}};class Q{constructor(l={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const o in l)Se(l,o)&&(this[o]=l[o]);l.value?this.fromString(l.value):this.doOnChange()}set(l,o){if(arguments.length===1&&typeof l=="object"){for(const t in l)Se(l,t)&&this.set(t,l[t]);return}this[`_${l}`]=o,this.doOnChange()}get(l){return l==="alpha"?Math.floor(this[`_${l}`]):this[`_${l}`]}toRgb(){return J(this._hue,this._saturation,this._value)}fromString(l){if(!l){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const o=(t,n,a)=>{this._hue=Math.max(0,Math.min(360,t)),this._saturation=Math.max(0,Math.min(100,n)),this._value=Math.max(0,Math.min(100,a)),this.doOnChange()};if(l.includes("hsl")){const t=l.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,a)=>a>2?Number.parseFloat(n):Number.parseInt(n,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:n,s:a,v:s}=Lt(t[0],t[1],t[2]);o(n,a,s)}}else if(l.includes("hsv")){const t=l.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,a)=>a>2?Number.parseFloat(n):Number.parseInt(n,10));t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3&&o(t[0],t[1],t[2])}else if(l.includes("rgb")){const t=l.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,a)=>a>2?Number.parseFloat(n):Number.parseInt(n,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:n,s:a,v:s}=Le(t[0],t[1],t[2]);o(n,a,s)}}else if(l.includes("#")){const t=l.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(t))return;let n,a,s;t.length===3?(n=O(t[0]+t[0]),a=O(t[1]+t[1]),s=O(t[2]+t[2])):(t.length===6||t.length===8)&&(n=O(t.slice(0,2)),a=O(t.slice(2,4)),s=O(t.slice(4,6))),t.length===8?this._alpha=O(t.slice(6))/255*100:(t.length===3||t.length===6)&&(this._alpha=100);const{h:c,s:i,v:d}=Le(n,a,s);o(c,i,d)}}compare(l){return Math.abs(l._hue-this._hue)<2&&Math.abs(l._saturation-this._saturation)<1&&Math.abs(l._value-this._value)<1&&Math.abs(l._alpha-this._alpha)<1}doOnChange(){const{_hue:l,_saturation:o,_value:t,_alpha:n,format:a}=this;if(this.enableAlpha)switch(a){case"hsl":{const s=Te(l,o/100,t/100);this.value=`hsla(${l}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${l}, ${Math.round(o)}%, ${Math.round(t)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Be(J(l,o,t))}${re(n*255/100)}`;break}default:{const{r:s,g:c,b:i}=J(l,o,t);this.value=`rgba(${s}, ${c}, ${i}, ${this.get("alpha")/100})`}}else switch(a){case"hsl":{const s=Te(l,o/100,t/100);this.value=`hsl(${l}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${l}, ${Math.round(o)}%, ${Math.round(t)}%)`;break}case"rgb":{const{r:s,g:c,b:i}=J(l,o,t);this.value=`rgb(${s}, ${c}, ${i})`;break}default:this.value=Be(J(l,o,t))}}}const Dt=D({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const l=te("color-predefine"),{currentColor:o}=Ze(He),t=C(a(e.colors,e.color));L(()=>o.value,s=>{const c=new Q;c.fromString(s),t.value.forEach(i=>{i.selected=c.compare(i)})}),Ge(()=>{t.value=a(e.colors,e.color)});function n(s){e.color.fromString(e.colors[s])}function a(s,c){return s.map(i=>{const d=new Q;return d.enableAlpha=!0,d.format="rgba",d.fromString(i),d.selected=d.value===c.value,d})}return{rgbaColors:t,handleSelect:n,ns:l}}}),Wt=["onClick"];function Ht(e,l,o,t,n,a){return V(),I("div",{class:g(e.ns.b())},[F("div",{class:g(e.ns.e("colors"))},[(V(!0),I(Je,null,Qe(e.rgbaColors,(s,c)=>(V(),I("div",{key:e.colors[c],class:g([e.ns.e("color-selector"),e.ns.is("alpha",s._alpha<100),{selected:s.selected}]),onClick:i=>e.handleSelect(c)},[F("div",{style:R({backgroundColor:s.value})},null,4)],10,Wt))),128))],2)],2)}var zt=oe(Dt,[["render",Ht],["__file","predefine.vue"]]);const Ot=D({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const l=te("color-svpanel"),o=ie(),t=C(0),n=C(0),a=C("hsl(0, 100%, 50%)"),s=A(()=>{const d=e.color.get("hue"),y=e.color.get("value");return{hue:d,value:y}});function c(){const d=e.color.get("saturation"),y=e.color.get("value"),h=o.vnode.el,{clientWidth:$,clientHeight:v}=h;n.value=d*$/100,t.value=(100-y)*v/100,a.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function i(d){const h=o.vnode.el.getBoundingClientRect(),{clientX:$,clientY:v}=ge(d);let m=$-h.left,b=v-h.top;m=Math.max(0,m),m=Math.min(m,h.width),b=Math.max(0,b),b=Math.min(b,h.height),n.value=m,t.value=b,e.color.set({saturation:m/h.width*100,value:100-b/h.height*100})}return L(()=>s.value,()=>{c()}),le(()=>{ee(o.vnode.el,{drag:d=>{i(d)},end:d=>{i(d)}}),c()}),{cursorTop:t,cursorLeft:n,background:a,colorValue:s,handleDrag:i,update:c,ns:l}}}),Rt=F("div",null,null,-1),Kt=[Rt];function Ut(e,l,o,t,n,a){return V(),I("div",{class:g(e.ns.b()),style:R({backgroundColor:e.background})},[F("div",{class:g(e.ns.e("white"))},null,2),F("div",{class:g(e.ns.e("black"))},null,2),F("div",{class:g(e.ns.e("cursor")),style:R({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},Kt,6)],6)}var Xt=oe(Ot,[["render",Ut],["__file","sv-panel.vue"]]);const Yt=["onKeydown"],jt=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],qt=D({name:"ElColorPicker"}),xt=D({...qt,props:Pt,emits:Tt,setup(e,{expose:l,emit:o}){const t=e,{t:n}=et(),a=te("color"),{formItem:s}=tt(),c=lt(),i=ot(),{inputId:d,isLabeledByFormItem:y}=at(t,{formItemContext:s}),h=C(),$=C(),v=C(),m=C(),b=C(),W=C(),{isFocused:H,handleFocus:w,handleBlur:f}=nt(b,{beforeBlur(u){var E;return(E=m.value)==null?void 0:E.isFocusInsideContent(u)},afterBlur(){Z(!1),G()}}),_=u=>{if(i.value)return ye();w(u)};let S=!0;const M=st(new Q({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue})),B=C(!1),N=C(!1),z=C(""),K=A(()=>!t.modelValue&&!N.value?"transparent":ze(M,t.showAlpha)),q=A(()=>!t.modelValue&&!N.value?"":M.value),ae=A(()=>y.value?void 0:t.label||n("el.colorpicker.defaultLabel")),x=A(()=>y.value?s==null?void 0:s.labelId:void 0),P=A(()=>[a.b("picker"),a.is("disabled",i.value),a.bm("picker",c.value),a.is("focused",H.value)]);function ze(u,E){if(!(u instanceof Q))throw new TypeError("color should be instance of _color Class");const{r:T,g:$e,b:we}=u.toRgb();return E?`rgba(${T}, ${$e}, ${we}, ${u.get("alpha")/100})`:`rgb(${T}, ${$e}, ${we})`}function Z(u){B.value=u}const ne=Ct(Z,100,{leading:!0});function be(){i.value||Z(!0)}function _e(){ne(!1),G()}function G(){se(()=>{t.modelValue?M.fromString(t.modelValue):(M.value="",se(()=>{N.value=!1}))})}function Oe(){i.value||ne(!B.value)}function ke(){M.fromString(z.value)}function Re(){const u=M.value;o(me,u),o("change",u),t.validateEvent&&(s==null||s.validate("change").catch(E=>Pe())),ne(!1),se(()=>{const E=new Q({enableAlpha:t.showAlpha,format:t.colorFormat||"",value:t.modelValue});M.compare(E)||G()})}function Ke(){ne(!1),o(me,null),o("change",null),t.modelValue!==null&&t.validateEvent&&(s==null||s.validate("change").catch(u=>Pe())),G()}function Ue(u){if(B.value&&(_e(),H.value)){const E=new FocusEvent("focus",u);f(E)}}function Ce(u){u.preventDefault(),u.stopPropagation(),Z(!1),G()}function Xe(u){switch(u.code){case he.enter:case he.space:u.preventDefault(),u.stopPropagation(),be(),W.value.focus();break;case he.esc:Ce(u);break}}function Ye(){b.value.focus()}function ye(){b.value.blur()}return le(()=>{t.modelValue&&(z.value=q.value)}),L(()=>t.modelValue,u=>{u?u&&u!==M.value&&(S=!1,M.fromString(u)):N.value=!1}),L(()=>q.value,u=>{z.value=u,S&&o("activeChange",u),S=!0}),L(()=>M.value,()=>{!t.modelValue&&!N.value&&(N.value=!0)}),L(()=>B.value,()=>{se(()=>{var u,E,T;(u=h.value)==null||u.update(),(E=$.value)==null||E.update(),(T=v.value)==null||T.update()})}),rt(He,{currentColor:q}),l({color:M,show:be,hide:_e,focus:Ye,blur:ye}),(u,E)=>(V(),X(r(ht),{ref_key:"popper",ref:m,visible:B.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[r(a).be("picker","panel"),r(a).b("dropdown"),u.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${r(a).namespace.value}-zoom-in-top`,persistent:"",onHide:E[2]||(E[2]=T=>Z(!1))},{content:k(()=>[Y((V(),I("div",{onKeydown:Fe(Ce,["esc"])},[F("div",{class:g(r(a).be("dropdown","main-wrapper"))},[p(At,{ref_key:"hue",ref:h,class:"hue-slider",color:r(M),vertical:""},null,8,["color"]),p(Xt,{ref_key:"sv",ref:$,color:r(M)},null,8,["color"])],2),u.showAlpha?(V(),X(Ft,{key:0,ref_key:"alpha",ref:v,color:r(M)},null,8,["color"])):de("v-if",!0),u.predefine?(V(),X(zt,{key:1,ref:"predefine",color:r(M),colors:u.predefine},null,8,["color","colors"])):de("v-if",!0),F("div",{class:g(r(a).be("dropdown","btns"))},[F("span",{class:g(r(a).be("dropdown","value"))},[p(r(it),{ref_key:"inputRef",ref:W,modelValue:z.value,"onUpdate:modelValue":E[0]||(E[0]=T=>z.value=T),"validate-event":!1,size:"small",onKeyup:Fe(ke,["enter"]),onBlur:ke},null,8,["modelValue","onKeyup"])],2),p(r(ve),{class:g(r(a).be("dropdown","link-btn")),text:"",size:"small",onClick:Ke},{default:k(()=>[U(Ve(r(n)("el.colorpicker.clear")),1)]),_:1},8,["class"]),p(r(ve),{plain:"",size:"small",class:g(r(a).be("dropdown","btn")),onClick:Re},{default:k(()=>[U(Ve(r(n)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,Yt)),[[r(ut),Ue]])]),default:k(()=>[F("div",{id:r(d),ref_key:"triggerRef",ref:b,class:g(r(P)),role:"button","aria-label":r(ae),"aria-labelledby":r(x),"aria-description":r(n)("el.colorpicker.description",{color:u.modelValue||""}),"aria-disabled":r(i),tabindex:r(i)?-1:u.tabindex,onKeydown:Xe,onFocus:_,onBlur:E[1]||(E[1]=(...T)=>r(f)&&r(f)(...T))},[r(i)?(V(),I("div",{key:0,class:g(r(a).be("picker","mask"))},null,2)):de("v-if",!0),F("div",{class:g(r(a).be("picker","trigger")),onClick:Oe},[F("span",{class:g([r(a).be("picker","color"),r(a).is("alpha",u.showAlpha)])},[F("span",{class:g(r(a).be("picker","color-inner")),style:R({backgroundColor:r(K)})},[Y(p(r(Ne),{class:g([r(a).be("picker","icon"),r(a).is("icon-arrow-down")])},{default:k(()=>[p(r(ct))]),_:1},8,["class"]),[[Ae,u.modelValue||N.value]]),Y(p(r(Ne),{class:g([r(a).be("picker","empty"),r(a).is("icon-close")])},{default:k(()=>[p(r(dt))]),_:1},8,["class"]),[[Ae,!u.modelValue&&!N.value]])],6)],2)],2)],42,jt)]),_:1},8,["visible","popper-class","transition"]))}});var Zt=oe(xt,[["__file","color-picker.vue"]]);const Gt=ft(Zt),Jt={class:"sign"},Qt=["width","height"],el=D({__name:"index",setup(e){const l=C({width:800,height:300,fillStyle:"#fff",color:"#000",lineWidth:4});let o=!1,t,n,a=[];const s=()=>{t=document.getElementById("canvas"),n=t.getContext("2d",{willReadFrequently:!0}),d(),n.fillRect(0,0,t.width,t.height),i(),c()},c=()=>{n.strokeStyle=l.value.color},i=()=>{n.lineWidth=l.value.lineWidth},d=()=>{n.fillStyle=l.value.fillStyle},y=()=>{l.value={...l.value,fillStyle:"#fff",color:"#000",lineWidth:4},d(),i(),c()},h=()=>{o=!1},$=()=>{const _=n.getImageData(0,0,t.width,t.height);a.push(_),o=!1},v=()=>{if(a.length)if(a.length>1){const _=a.at(-2);a.pop(),n.putImageData(_,0,0)}else a.length===1&&(a.pop(),m())};function m(){a.length&&(a=[],n.clearRect(0,0,t.width,t.height))}const b=()=>{const _=document.createElement("a"),S=t.toDataURL();_.href=S,_.download=W(),document.body.appendChild(_),_.click(),document.body.removeChild(_)},W=(_=36,S=-6)=>Math.random().toString(_).slice(S),H=_=>{n.beginPath(),n.moveTo(_.offsetX,_.offsetY),o=!0},w=_=>{o&&(n.lineTo(_.offsetX,_.offsetY),n.stroke())},f=()=>{d(),n.fillRect(0,0,t.width,t.height)};return le(()=>{s()}),(_,S)=>{const M=kt,B=_t,N=gt,z=Gt,K=ve,q=bt,ae=vt,x=pt("blur");return V(),I("div",Jt,[p(ae,{gutter:20},{default:k(()=>[p(M,{span:20},{default:k(()=>[F("canvas",{id:"canvas",width:r(l).width,height:r(l).height,onMouseleave:h,onMousedown:H,onMouseup:$,onMousemove:w}," 你的浏览器不支持 canvas，请升级你的浏览器。 ",40,Qt)]),_:1}),p(M,{span:4},{default:k(()=>[p(q,{model:r(l),ref:"form","label-width":"80px",inline:!1},{default:k(()=>[p(N,{label:"画布宽度",prop:"width"},{default:k(()=>[p(B,{modelValue:r(l).width,"onUpdate:modelValue":S[0]||(S[0]=P=>r(l).width=P),min:0,size:"small"},null,8,["modelValue"])]),_:1}),p(N,{label:"画布高度",prop:"height"},{default:k(()=>[p(B,{modelValue:r(l).height,"onUpdate:modelValue":S[1]||(S[1]=P=>r(l).height=P),min:0,size:"small"},null,8,["modelValue"])]),_:1}),p(N,{label:"背景颜色",prop:"fillStyle"},{default:k(()=>[p(z,{modelValue:r(l).fillStyle,"onUpdate:modelValue":S[2]||(S[2]=P=>r(l).fillStyle=P),size:"large","show-alpha":"",onChange:f},null,8,["modelValue"])]),_:1}),p(N,{label:"画笔颜色",prop:"color"},{default:k(()=>[p(z,{modelValue:r(l).color,"onUpdate:modelValue":S[3]||(S[3]=P=>r(l).color=P),size:"large","show-alpha":"",onChange:c},null,8,["modelValue"])]),_:1}),p(N,{label:"画笔粗细",prop:"lineWidth"},{default:k(()=>[p(B,{modelValue:r(l).lineWidth,"onUpdate:modelValue":S[4]||(S[4]=P=>r(l).lineWidth=P),min:0,"step-strictly":"",onChange:i,size:"small"},null,8,["modelValue"])]),_:1}),p(N,null,{default:k(()=>[p(K,{type:"primary",size:"small",onClick:y},{default:k(()=>[U("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),p(ae,null,{default:k(()=>[p(M,null,{default:k(()=>[Y((V(),X(K,{type:"primary",size:"small",onClick:v},{default:k(()=>[U("上一步")]),_:1})),[[x]]),Y((V(),X(K,{type:"primary",size:"small",onClick:m},{default:k(()=>[U("清空")]),_:1})),[[x]]),Y((V(),X(K,{type:"primary",size:"small",onClick:b},{default:k(()=>[U("保存图片")]),_:1})),[[x]])]),_:1})]),_:1})])}}}),tl=mt(el,[["__scopeId","data-v-089bfd7b"]]),dl=D({__name:"Sign",setup(e){return(l,o)=>(V(),I("div",null,[p(tl)]))}});export{dl as default};
