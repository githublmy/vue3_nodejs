import{_ as M}from"./index.C5VTvzYo.js";import{ay as U,d as N,ai as V,az as $,r as b,ah as j,aj as F,o as u,c as g,g as s,w as c,e as d,ak as h,b as A,al as x,ae as v,aA as I,am as P,an as q}from"./main.C3FM7xY-.js";import{E as G}from"./el-progress.CE8EIpKM.js";import"./el-loading.LAWmgmpq.js";import"./el-select.B_chYQKB.js";import"./isEqual.Bkk_aoso.js";import"./_Uint8Array.D42p_WI7.js";import"./debounce.irBtgUcq.js";import"./hasIn.Csy26C9S.js";import"./el-checkbox.Ls5Yxxhq.js";import"./el-row.CcOqyCFk.js";import"./_initCloneObject.Qk-NjU54.js";import"./_baseClone.D8GOoQrA.js";const H=U("fileList",{state:()=>({fileList:[]})}),J=v("div",{class:"el-upload__text"},[x("拖拽文件或者"),v("em",null,"点击上传")],-1),K=N({__name:"index",setup(k){const m=V("elMsg"),i="http://localhost:3000/files/upload",{fileList:r}=$(H()),C=b([{prop:"name",label:"文件名称"},{prop:"size",label:"文件大小"},{prop:"percentage",label:"上传进度(%)"},{prop:"operate",label:"操作",slot:"operate"}]),n=b(),y=(e,o)=>{n.value.handleRemove(e),r.value.splice(o,1)},E=()=>{n.value.submit()},z=(e,o)=>{e.status==="ready"&&r.value.unshift(e)},S=(e,o,t)=>{m.success("上传成功"),console.log(n,"最后结果")},T=e=>{const o=e.size,t=1024*1024*5,p=Math.ceil(o/t);for(let l=0;l<p;l++){const a=l*t,_=Math.min(a+t,o);e.slice(a,_)}},w=(e,o,t)=>{console.log(o,e)},B=(e,o)=>{console.log(e,o)},D=(e,o)=>(console.log(e,o),!0);return(e,o)=>{const t=j("upload-filled"),p=I,l=G,a=P,_=M,f=F("blur");return u(),g("div",null,[s(l,{ref_key:"uploadRef",ref:n,style:{width:"100%"},action:d(i),"before-upload":T,"before-remove":D,drag:"",multiple:"","auto-upload":!1,"show-file-list":!1,"on-progress":w,"on-exceed":B,"on-change":z,"on-success":S},{default:c(()=>[s(p,{class:"el-icon--upload"},{default:c(()=>[s(t)]),_:1}),J]),_:1},8,["action"]),s(_,{tableTitle:d(C),tableData:d(r)},{operate:c(({row:R,index:L})=>[h(s(a,{type:"danger",icon:"Delete",plain:"",size:"small",onClick:X=>y(R,L)},null,8,["onClick"]),[[f]])]),_:1},8,["tableTitle","tableData"]),h((u(),A(a,{type:"success",onClick:E},{default:c(()=>[x(" 开始上传 ")]),_:1})),[[f]])])}}}),O={},Q={class:"baseStyle"};function W(k,m){const i=K;return u(),g("div",Q,[s(i)])}const _e=q(O,[["render",W]]);export{_e as default};
